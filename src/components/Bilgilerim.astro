<div class="h-full bg-gray-200 p-8">
    <div class="bg-white rounded-lg shadow-xl pb-8">
        <div x-data="{ openSettings: false }" class="absolute right-12 mt-4 rounded">
            <button @click="openSettings = !openSettings" class="border border-gray-400 p-2 rounded text-gray-300 hover:text-gray-300 bg-gray-100 bg-opacity-10 hover:bg-opacity-20" title="Settings">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
                </svg>
            </button>
            <div x-show="openSettings" @click.away="openSettings = false" class="bg-white absolute right-0 w-40 py-2 mt-1 border border-gray-200 shadow-2xl" style="display: none;">
                <div class="py-2 border-b">
                    <p class="text-gray-400 text-xs px-6 uppercase mb-1">Ayarlar</p>
                    <button class="w-full flex items-center py-1.5 px-6 space-x-2 hover:bg-gray-200">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        <span class="text-sm text-gray-700">Düzenle</span>
                    </button>
                </div>
                <div class="py-2">
                    <p class="text-gray-400 text-xs px-6 uppercase mb-1">Geri Bildirim</p>
                    <button class="w-full flex items-center py-1.5 px-6 space-x-2 hover:bg-gray-200">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        <span class="text-sm text-gray-700">Şikayet</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="w-full h-[250px]">
            <img src="https://vojislavd.com/ta-template-demo/assets/img/profile-background.jpg" class="w-full h-full rounded-tl-lg rounded-tr-lg">
        </div>
        <div class="flex flex-col items-center -mt-20">
            <img src="public/images/ibrahim.jpg" class="w-40 border-4 border-white rounded-full">
            <div class="flex items-center space-x-2 mt-2">
                <p class="text-2xl">İbrahim</p>
            </div>
            <p class="text-gray-700">Senior Software Engineer </p>
            <p class="text-sm text-gray-500">İzmir, Turkey</p>
        </div>

    </div>
    
    <div class="my-4 flex flex-col 2xl:flex-row space-y-4 2xl:space-y-0 2xl:space-x-4">
        <div class="w-full flex flex-col 2xl:w-1/3">
            <div x-data="{ editing: false }" class="flex-1 bg-white rounded-lg shadow-xl p-8">
                <h4 class="text-xl text-gray-900 font-bold">Bilgilerim</h4>
                <ul class="mt-2 text-gray-700">
                    <template x-for="(item, index) in [    { label: 'İsim', value: 'İbrahim', type: 'text' },    { label: 'Doğum Tarihi', value: '1991-03-24', type: 'date' },    { label: 'Katılım Tarihi', value: '2022-05-10', type: 'date' },    { label: 'Yaş', value: '27', type: 'text' },    { label: 'Boy', value: '186', type: 'text' },    { label: 'Kilo', value: '75', type: 'text' },]">
                        <li class="flex border-b py-2" :key="index">
                            <span class="font-bold w-24" x-text="item.label"></span>
                            <span class="text-gray-700" x-show="!editing" x-text="item.value"></span>
                            <input class="text-gray-700" x-show="editing" x-model="item.value" :type="item.type">
                        </li>
                    </template>
                </ul>
                <div class="mt-4">
                    <button x-show="!editing" @click="editing = true" class="mt-4 text-blue-600 font-semibold">Düzenle</button>
                    <button x-show="editing" @click="editing = false" class="mt-4 text-blue-600 font-semibold">Bitti</button>
                </div>
            </div>
            <div class="flex-1 bg-white rounded-lg shadow-xl mt-4 p-8">
                <h4 class="text-xl text-gray-900 font-bold">Aktivitelerim</h4>
                <div class="relative px-4">
                    <div class="absolute h-full border border-dashed border-opacity-20 border-secondary"></div>

                    <!-- start::Timeline item -->
                    <div class="flex items-center w-full my-6 -ml-1.5">
                        <div class="w-1/12 z-10">
                            <div class="w-3.5 h-3.5 bg-blue-600 rounded-full"></div>
                        </div>
                        <div class="w-11/12">
                            <p class="text-sm">
                                100 m yürüyüş <a href="#" class="text-blue-600 font-bold">İlk 100</a>.</p>
                            <p class="text-xs text-gray-500">1 saat önce</p>
                        </div>
                    </div>
                    <!-- end::Timeline item -->

                    <!-- start::Timeline item -->
                    <div class="flex items-center w-full my-6 -ml-1.5"> 
                        <div class="w-1/12 z-10">
                            <div class="w-3.5 h-3.5 bg-blue-600 rounded-full"></div>
                        </div>
                        <div class="w-11/12">
                            Gün sonuna kadar 5 Litre Su içtim <p class="text-sm"><a href="#" class="text-blue-600 font-bold">Su Canavarı</a>.</p>
                            <p class="text-xs text-gray-500">15 saat önce</p>
                        </div>
                    </div>
                    <!-- end::Timeline item -->

                    <!-- start::Timeline item -->
                    <div class="flex items-center w-full my-6 -ml-1.5">
                        <div class="w-1/12 z-10">
                            <div class="w-3.5 h-3.5 bg-blue-600 rounded-full"></div>
                        </div>
                        <div class="w-11/12">
                            <p class="text-sm">
                                Ara Öğün : Brokoli <a href="#" class="text-blue-600 font-bold">Otobur</a>.</p>
                            <p class="text-xs text-gray-500">2 gün önce</p>
                        </div>
                    </div>
                    <!-- end::Timeline item -->
                </div>
            </div>
        </div>
        <div class="flex flex-col w-full 2xl:w-2/3">

            <!-- HAKKIMDA-->
            <div x-data="{ editing: false, content: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt voluptates obcaecati numquam error et ut fugiat asperiores. Sunt nulla ad incidunt laboriosam, laudantium est unde natus cum numquam, neque facere. Lorem ipsum dolor sit amet consectetur adipisicing elit. Ut, magni odio magnam commodi sunt ipsum eum! Voluptas eveniet aperiam at maxime, iste id dicta autem odio laudantium eligendi commodi distinctio!', tempContent: '' }" class="flex-1 bg-white rounded-lg shadow-xl p-8">
                <h4 class="text-xl text-gray-900 font-bold">Hakkımda</h4>
                <p x-show="!editing" class="mt-2 text-gray-700" x-text="content"></p>
                <textarea x-show="editing" x-model="tempContent" class="w-full mt-2 text-gray-700 border border-gray-300 rounded p-2"></textarea>
                <button @click="editing = !editing; tempContent = content" x-show="!editing" class="mt-4 text-blue-600 font-semibold">
                  Düzenle
                </button>
                <button @click="editing = !editing; content = tempContent" x-show="editing" class="mt-4 text-blue-600 font-semibold">
                  Bitti
                </button>
              </div>
              <!-- iSTATİSTİKLER-->
            <div class="flex-1 bg-white rounded-lg shadow-xl mt-4 p-8">
                <h4 class="text-xl text-gray-900 font-bold">İlerlemem</h4>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mt-4">
                    <!-- Su Tüketimi-->
                    <div x-data="{ suEkleModal: false, suGrafikModal: false, totalConsumption: 25, inputValue: 0 }">                        <div class="px-6 py-6 bg-gray-100 border border-gray-300 rounded-lg shadow-xl">
                            <div class="flex items-center justify-between">
                                <span class="font-bold text-sm text-sky-500">Toplam Su Tüketimi</span>
                                <button @click="suGrafikModal = true" class="focus:outline-none">
                                    <span class="text-xs bg-gray-200 hover:bg-gray-500 text-gray-500 hover:text-gray-200 px-2 py-1 rounded-lg transition duration-200 cursor-pointer">7 days</span>
                                </button>                            </div>
                            <div class="flex items-center justify-between mt-6">
                
                                <div>
                                    <img src="/images/su_damlasi.svg" alt="Su damlası" class="w-9 h-9">
                                </div>
                                <!-- buton -->
                                <button @click="suEkleModal = true" class="relative inline-flex items-center justify-center p-4 px-2 py-2 overflow-hidden font-medium text-sky-600 transition duration-300 ease-out border-2 border-sky-500 rounded-full shadow-md group">
                                    <span class="absolute inset-0 flex items-center justify-center w-full h-full text-white duration-300 -translate-x-full bg-sky-500 group-hover:translate-x-0 ease">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                                        </svg>
                                    </span>
                                    <span class="absolute flex items-center justify-center w-full h-full text-sky-500 transition-all duration-300 transform group-hover:translate-x-full ease">Ekle</span>
                                    <span class="relative invisible">Button Text</span>
                                </button><!-- buton -->
                
                                <div class="flex flex-col">
                                    <div class="flex items-end">
                                        <span x-text="totalConsumption" class="text-2xl 2xl:text-3xl  font-bold"></span>
                                        <span class="text-2xl 2xl:text-xl italic  ">Litre </span>
                                        <div class="flex items-center ml-2 mb-1">
                                            <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                                            <span class="font-bold text-sm text-gray-500 ml-0.5">3%</span>
                                        </div>
                                    </div>
                                </div>

                    <!-- Modal -->
                    <div x-show="suEkleModal" class="fixed inset-0 z-30 flex items-center justify-center p-4 bg-black bg-opacity-75">
                        <div class="bg-white rounded-lg shadow-xl w-1/2 md:w-1/4">
                            <div class="p-4">
                                <h2 class="text-xl font-bold">Su Tüketimi Ekle</h2>
                                <form class="mt-4" @submit.prevent="totalConsumption += parseFloat(inputValue); suEkleModal = false; inputValue = 0">
                                    <label class="block mb-2">Miktar (Litre):</label>
                                    <input x-model="inputValue" type="number" min="0" max="10" step="0.1" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="0.0" />
                                    <div class="mt-4 flex justify-end">
                                        <button @click.prevent="suEkleModal = false; inputValue = 0" class="px-4 py-2 bg-red-500 text-white rounded-lg mr-2">İptal</button>                                        <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-lg">Ekle</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                            <!-- Modal 2 -->
                    <div class="fixed inset-0 z-30 flex items-center justify-center p-4 bg-black bg-opacity-75" x-show="suGrafikModal" x-on:click.away="suGrafikModal = false">
                        <div class="bg-white rounded-lg shadow-xl w-3/4 md:w-1/2">
                            <div class="p-4">
                                <h2 class="text-xl font-bold">Günlük Su Tüketimi Grafiği</h2>
                                <div class="mt-4">
                                    <canvas id="gunlukSuTuketimGrafik"></canvas>
                                </div>
                                <div class="mt-4">
                                    <canvas id="chartGrafik" style="display: block; box-sizing: border-box; height: 414px; width: 828px;" width="1656" height="828"></canvas>
                                </div>
                                <div class="mt-4 flex justify-end">
                                    <button @click.prevent="suGrafikModal = false" class="px-4 py-2 bg-red-500 text-white rounded-lg">Kapat</button>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
                    <!-- Kalori Tüketimi-->
                </div>


            </div>  
<script>
import Alpine from 'alpinejs';
import Chart from 'chart.js/auto';

const DATA_SET_VERTICAL_BAR_CHART_1 = [68.106, 26.762, 94.255, 72.021, 74.082, 64.923, 85.565, 32.432, 54.664, 87.654, 43.013, 91.443];
const labels_vertical_bar_chart = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziram', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık' ];
const dataVerticalBarChart = {
    labels: labels_vertical_bar_chart,
    datasets: [
        {
            label: 'Revenue',
            data: DATA_SET_VERTICAL_BAR_CHART_1,
            borderColor: 'rgb(54, 162, 235)',
            backgroundColor: 'rgba(54, 162, 235, 0.5)',
        }
    ]
};
const configVerticalBarChart = {
    type: 'bar',
    data: dataVerticalBarChart,
    options: {
        responsive: true,
        plugins: {
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Last 12 Months'
            }
        }
    },
};

function timelineComponent() {
    return {
        timelineItems: [],

        async fetchTimelineItems() {
            try {
                const response = await fetch('/api/timeline-items');
                const data = await response.json();
                this.timelineItems = data;
            } catch (error) {
                console.error('Error fetching timeline items:', error);
            }
        },
    };
}

function createDailyWaterConsumptionChart() {
    const canvasElement = document.getElementById('gunlukSuTuketimGrafik') as HTMLCanvasElement;
const ctx = canvasElement.getContext('2d');


    const data = {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [{
            label: 'Su Tüketimi (Litre)',
            data: [3, 2, 5, 1, 6, 3, 4],
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 2,
            tension: 0.1
        }]
    };

    const options = {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    };

    new Chart(ctx, {
        type: 'line',
        data: data,
        options: options
    });
}

document.addEventListener("DOMContentLoaded", function () {
    var chartGrafik = new Chart(
        document.getElementById('chartGrafik'),
        configVerticalBarChart
    );

    
});
Alpine.start();
</script>